<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>A-I: Algorithmic Identities</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="favicon.png" />

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        body {
            margin: 0;
            font-family: 'Chakra Petch', sans-serif;
        }
    </style>

    <link rel="stylesheet" href="/algorithmic-identities/assets/styles.css">
    <base href="/algorithmic-identities/">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>


    <style>
        /* Essential styling for the animation container */
        #animation-container {
            width: 100%;
            height: 100vh;
            /* Fill the right panel */
            position: relative;
            overflow: hidden;
            background-color: #ffffff;
        }

        /* Ensure right panel doesn't scroll excessively */
        .right-panel.index-page {
            overflow: hidden;
            padding: 0 !important;
            /* Remove padding to let canvas touch edges */
        }
    </style>
</head>

<body>

    <div class="page-shell">

        <aside class="left-rail">

            <div class="site-title-block">
                <div class="site-kicker"><a href="index.html">A-I: Algorithmic Identities</a></div>
                <p class="site-description">
                    A design-research project exploring how our digital identities are co-constructed by algorithms,
                    shaping who we become online.
                </p>
            </div>

            <nav class="nav-groups">
                <div class="nav-group overview-group">
                    <button class="nav-toggle" aria-expanded="false">
                        <span>SEM 1 / OVERVIEW</span>
                        <span class="nav-toggle-symbol">+</span>
                    </button>
                    <ul class="overview-weeks">
                        <li><a href="semester-1/week-1.html"><strong>W1</strong> : Prologue</a></li>
                        <li><a href="semester-1/week-2.html"><strong>W2</strong> : Atelier Presentation</a></li>
                        <li><a href="semester-1/week-3.html"><strong>W3</strong> : Mindmap & E-1</a></li>
                        <li><a href="semester-1/week-4.html"><strong>W4</strong> : RPO Plan & P-1</a></li>
                        <li><a href="semester-1/week-5.html"><strong>W5</strong> : RPO Consult & RE-1</a></li>
                        <li><a href="semester-1/week-6.html"><strong>W6</strong> : RPO Peer Reviews</a></li>
                        <li><a href="semester-1/week-7.html"><strong>W7</strong> : Formative Assessment</a></li>
                        <li><a href="semester-1/week-8.html"><strong>W8</strong> : E-2</a></li>
                        <li><a href="semester-1/week-9.html"><strong>W9</strong> : ASM & AxiDraw</a></li>
                        <li><a href="semester-1/week-10.html"><strong>W10</strong> : Task-Based Making</a></li>
                        <li><a href="semester-1/week-11.html"><strong>W11</strong> : E-3 - 6</a></li>
                        <li><a href="semester-1/week-12.html"><strong>W12</strong> : P-2</a></li>
                        <li><a href="semester-1/week-13.html"><strong>W13</strong> : Cohort Presentation</a></li>
                        <li><a href="semester-1/week-14.html"><strong>W14</strong> : P-3</a></li>
                        <li><a href="semester-1/week-15.html"><strong>W15</strong> : E-7 & P-4</a></li>
                    </ul>
                </div>

                <div class="nav-group overview-group">
                    <button class="nav-toggle" aria-expanded="false">
                        <span>SEM 2 / OVERVIEW</span>
                        <span class="nav-toggle-symbol">+</span>
                    </button>
                    <ul class="overview-weeks">
                        <li><a href="semester-2/week-1.html"><strong>W1</strong> : SEM-1 Review</a></li>
                        <li><a href="semester-2/week-2.html"><strong>W2</strong> : E-8</a></li>
                        <li><a href="semester-2/week-3.html"><strong>W3</strong> : P-6 & GDI Interview</a></li>
                        <li><a href="semester-2/week-4.html"><strong>W4</strong> : Exploring Arduino</a></li>
                        <li><a href="semester-2/week-5.html"><strong>W5</strong> : Exhibit 3D Model</a></li>
                    </ul>
                </div>

                <div class="nav-group"><a class="nav-link" href="catalogue.html">Catalogue of Making</a></div>
                <div class="nav-group"><a class="nav-link" href="repository.html">Repository</a></div>
                <div class="nav-group"><a class="nav-link" href="about.html">About</a></div>
            </nav>

            <div class="left-rail-footer">
                © ETHEL LIM<br>
                CiD / 2025
            </div>

        </aside>

        <main class="right-panel index-page">
            <div id="animation-container">
            </div>
        </main>

    </div>


    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".overview-group").forEach(group => {
                const toggleBtn = group.querySelector(".nav-toggle");
                const symbol = group.querySelector(".nav-toggle-symbol");

                if (!toggleBtn || !symbol) return;

                group.classList.remove("is-open");
                toggleBtn.setAttribute("aria-expanded", "false");
                symbol.textContent = "+";

                toggleBtn.addEventListener("click", () => {
                    const isOpen = group.classList.toggle("is-open");
                    toggleBtn.setAttribute("aria-expanded", isOpen ? "true" : "false");
                    symbol.textContent = isOpen ? "−" : "+";
                });
            });
        });
    </script>

    <script>
        let input;
        let pg;
        let points = [];
        const res = 16;
        const density = "Ñ@#W$9876543210?!abc;:+=-,._ ";

        let thumbnails = [];
        let imgPaths = [
            'https://picsum.photos/50/50?random=1',
            'https://picsum.photos/50/50?random=2',
            'https://picsum.photos/50/50?random=3'
        ];

        let progress = 0;
        let faceProgress = 0;
        const speed = 0.007;
        const morphSpeed = 0.005;
        let isMorphing = false;

        let containerEl;

        function preload() {
            for (let path of imgPaths) thumbnails.push(loadImage(path));
        }

        function setup() {
            containerEl = document.getElementById("animation-container");

            // Match canvas to the container (right panel)
            const w = containerEl.clientWidth;
            const h = containerEl.clientHeight;

            const cnv = createCanvas(w, h);
            cnv.parent("animation-container");

            pg = createGraphics(w, h);
            pg.pixelDensity(1);

            // Input field
            input = createInput('[A-I]');
            input.parent("animation-container");
            input.style('position', 'absolute');
            input.style('left', '20px');
            input.style('bottom', '20px');
            input.style('font-family', "'Chakra Petch', sans-serif");
            input.style('font-weight', '700');
            input.style('font-size', '14px');
            input.style('border', '1px solid rgba(0,0,0,0.15)');
            input.style('background', 'rgba(255,255,255,0.85)');
            input.style('padding', '8px 10px');
            input.style('outline', 'none');

            input.input(() => {
                document.fonts.load("700 16px 'Chakra Petch'").then(() => {
                    updateWordPoints();
                }).catch(updateWordPoints);

                progress = 0;
                faceProgress = 0;
                isMorphing = false;
            });


            document.fonts.load("700 16px 'Chakra Petch'").then(() => {
                updateWordPoints();
            }).catch(() => {
                updateWordPoints(); // fallback if fonts API fails
            });


            // Hide loading text once p5 is ready
            const loading = document.getElementById('loading-info');
            if (loading) loading.style.display = 'none';
        }

        function updateWordPoints() {
            points = [];
            pg.clear();
            pg.background(255);
            pg.fill(0);

            pg.textFont('Chakra Petch');
            pg.textStyle(BOLD);

            let txt = input.value().toUpperCase();
            let dynamicSize = width / (txt.length * 0.75);
            pg.textSize(min(dynamicSize, width / 4));
            pg.textAlign(CENTER, CENTER);
            pg.text(txt, pg.width / 2, pg.height / 2);
            pg.loadPixels();

            let tempPoints = [];
            for (let y = 0; y < pg.height; y += res) {
                for (let x = 0; x < pg.width; x += res) {
                    const index = (x + y * pg.width) * 4;
                    if (pg.pixels[index] < 128) tempPoints.push({ x, y });
                }
            }

            if (tempPoints.length === 0) return;

            let cols = floor(width / res);
            let rows = floor(height / res);

            for (let i = 0; i < cols * rows; i++) {
                let sourceP = tempPoints[i % tempPoints.length];
                let gx = (i % cols) * res + res / 2;
                let gy = floor(i / cols) * res + res / 2;

                points.push({
                    x: sourceP.x,
                    y: sourceP.y,
                    fx: gx,
                    fy: gy,
                    type: floor(random(4)),
                    imgIdx: floor(random(thumbnails.length)),
                    seed: random(1000)
                });
            }
        }

        function draw() {
            background(255);

            if (points.length === 0) return;

            if (progress < 1) {
                progress += speed;
            } else {
                if (frameCount % 120 === 0) isMorphing = true;
                if (isMorphing && faceProgress < 1) faceProgress += morphSpeed;
            }

            let pT = easeOutQuart(progress);
            let fT = easeOutQuart(faceProgress);
            let currentRevealCount = map(pT, 0, 1, 1, points.length);

            rectMode(CENTER);
            imageMode(CENTER);
            textAlign(CENTER, CENTER);

            for (let i = 0; i < floor(currentRevealCount); i++) {
                let p = points[i];

                // Core lerp positions
                let rawX = lerp(width / 2, p.x, pT);
                let rawY = lerp(height / 2, p.y, pT);
                let targetX = lerp(rawX, p.fx, fT);
                let targetY = lerp(rawY, p.fy, fT);

                // --- HOVER REACTIVITY ---
                let mouseDist = dist(mouseX, mouseY, targetX, targetY);
                let interactionRadius = 150;
                let isHover = mouseDist < interactionRadius;

                let drawX = targetX;
                let drawY = targetY;
                let sizeMult = 1;

                if (mouseDist < interactionRadius) {
                    // Repulsion
                    let angle = atan2(targetY - mouseY, targetX - mouseX);
                    let force = map(mouseDist, 0, interactionRadius, 15, 0);
                    drawX += cos(angle) * force;
                    drawY += sin(angle) * force;

                    // Scaling
                    sizeMult = map(mouseDist, 0, interactionRadius, 2.5, 1);
                }

                if (progress > 0.98) {
                    drawAbstractElement(p, drawX, drawY, res * 0.9 * sizeMult, isHover);
                } else {
                    let currentSize = lerp(height * 0.35, res, pow(pT, 0.7));

                    if (isHover) {
                        fill(30, 120, 255); // accent blue on hover
                    } else {
                        fill(0);
                    }

                    textSize(currentSize * sizeMult);
                    text(
                        density.charAt(
                            floor(noise(p.x * 0.1, p.y * 0.1, frameCount * 0.1) * density.length)
                        ),
                        drawX,
                        drawY
                    );
                }

            }
        }

        function drawAbstractElement(p, x, y, size, isHover) {
            push();
            translate(x, y);

            if (isMorphing) {
                translate(random(-0.5, 0.5), random(-0.5, 0.5));
            }

            if (p.type === 0) {
                fill(isHover ? color(255, 60, 60) : 0);
                textSize(size);
                text(density.charAt(floor(noise(p.seed, frameCount * 0.1) * density.length)), 0, 0);
            }
            else if (p.type === 1) {
                noStroke();
                fill(isHover ? color(0, 200, 120) : color(0, 180));
                rect(0, 0, size * 0.8, size * 0.1);
            }
            else if (p.type === 2) {
                stroke(isHover ? color(255, 120, 0) : color(0, 150));
                strokeWeight(1.5);
                line(-size / 3, 0, size / 3, 0);
                line(0, -size / 3, 0, size / 3);
            }
            else {
                if (noise(frameCount * 0.1, p.seed) > 0.2) {
                    tint(255, isHover ? 255 : 200);
                    image(thumbnails[p.imgIdx], 0, 0, size, size);
                    noTint();
                }
            }


            pop();
        }

        function easeOutQuart(x) {
            return 1 - pow(1 - x, 4);
        }

        function windowResized() {
            if (!containerEl) return;

            const w = containerEl.clientWidth;
            const h = containerEl.clientHeight;

            resizeCanvas(w, h);

            pg = createGraphics(w, h);
            pg.pixelDensity(1);

            updateWordPoints();
            progress = 0;
            faceProgress = 0;
            isMorphing = false;
        }
    </script>


</body>

</html>